<div class="market-data">
    <h5>Market Data</h5>
    <div class="row">
        <label>
            Detailed View
            <input type="checkbox" data-bind="checked: show_detailed_view" />
        </label>
        <button class="button-secondary" data-bind="text: view_button_text, click: toggle_shown"></button>
    </div>
    <table>
        <thead>
        <tr>
            <th>Salary Range</th>
            <th>Roles</th>
            <th>Tech</th>
            <th>Type</th>
            <th>Perks</th>
            <th>Years Experience</th>
            <th>Education</th>
            <!-- ko if: $component.show_detailed_view() -->
            <th>Years with Current Employer</th>
            <th>Lifetime Employers</th>
            <!-- /ko -->
        </tr>
        <tbody data-bind="foreach: { data: table_submissions, as: 'item' }">
        <td data-bind="text: $component.get_pay_range_text(item.pay_range)"></td>
        <td data-bind="foreach: { data: roles, as: 'role' }">
            <span data-bind="text: role.name"></span><!-- ko if: $index() < item.roles.length - 1 -->,<br><!-- /ko -->
        </td>
        <td data-bind="foreach: { data: tech, as: 'tech' }">
            <span data-bind="text: tech.name"></span><!-- ko if: $index() < item.tech.length - 1 -->,<!-- /ko -->
        </td>
        <td data-bind="text: item.employment_type.name"></td>
        <td data-bind="foreach: { data: perks, as: 'perk' }">
            <span data-bind="text: perk.name"></span><!-- ko if: $index() < item.perks.length - 1 -->,<br><!-- /ko -->
        </td>
        <td data-bind="text: item.years_experience"></td>
        <td data-bind="text: item.education.name"></td>
        <!-- ko if: $component.show_detailed_view() -->
        <td data-bind="text: item.years_with_current_employer"></td>
        <td data-bind="text: item.number_of_employers"></td>
        <!-- /ko -->
        </tbody>
        </thead>
    </table>
    <!-- ko if: show_all() -->
    <button class="button-secondary" data-bind="text: view_button_text, click: toggle_shown"></button>
    <hr>
    <!-- /ko -->
</div>